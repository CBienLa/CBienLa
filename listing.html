<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Open CBienLa Listing</title>
    <script>
        // Extract listingId from query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const listingId = urlParams.get('id');

        // App Store & Play Store links
        const iosAppStore = "https://apps.apple.com/app/idYOUR_APPLE_ID";
        const androidPlayStore = "https://play.google.com/store/apps/details?id=com.yourcompany.myapp";

        // Detect device
        const ua = navigator.userAgent || navigator.vendor;
        if (/android/i.test(ua)) {
            // Try to open app via intent scheme first
            window.location.href = `cbienla://listing/${listingId}`;
            // Fallback to Play Store after short delay
            setTimeout(() => { window.location.href = androidPlayStore; }, 1500);
        } else if (/iPad|iPhone|iPod/.test(ua)) {
            // Try to open app via custom URL scheme
            window.location.href = `cbienla://listing/${listingId}`;
            // Fallback to App Store
            setTimeout(() => { window.location.href = iosAppStore; }, 1500);
        } else {
            // Desktop fallback
            alert(`Listing ID: ${listingId}`);
        }
    </script>
</head>

<body>
    <p>Redirecting to your app...</p>
    <p>If not redirected, click the links:</p>
    <a href="https://play.google.com/store/apps/details?id=com.yourcompany.myapp">Android</a><br>
    <a href="https://apps.apple.com/app/idYOUR_APPLE_ID">iOS</a>
</body>

</html>